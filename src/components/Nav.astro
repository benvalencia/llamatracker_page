---
interface Props {}
import { getRelativeLocaleUrl } from 'astro:i18n';
import { getLangFromUrl, useTranslations } from '../utils/i18n/utils';

const flag: any = {
	en: 'us',
	es: 'es',
	it: 'it',
	ca: 'es-ct',
}
const redirectRef: any = {
	en: {
		home: '#home',
		features: '#features',
		about: '#about',
		download: '#download',
	},
	es: {
		home: '#inicio',
		features: '#funcionalidades',
		about: '#sobre',
		download: '#descargar',
	},
	it: {
		home: '#casa',
		features: '#funzionalita',
		about: '#di',
		download: '#scaricamento',
	},
	ca: {
		home: '#inici',
		features: '#funcionalitats',
		about: '#sobre',
		download: '#descarregar',
	},
}
const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
---

<nav class="fixed z-50 w-full nav-container">
	<div class="max-w-screen-xl flex flex-wrap items-center justify-between mx-auto p-4 px-2">
		<a href={redirectRef[lang].home} class="flex items-center space-x-1 rtl:space-x-reverse">
			<div class="nav-container-logo"></div>
			<span class="self-center text-lg md:text-3xl font-semibold whitespace-nowrap text-white">Llamatracker</span>
		</a>
		<div class="flex md:order-2 space-x-3 md:space-x-0 rtl:space-x-reverse">
			<a href={redirectRef[lang].download}>
				<button type="button" class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-base md:text-base px-4 py-2 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">
					{t("nav.menu.download-app")}
				</button>
			</a>
			<button data-collapse-toggle="navbar-cta" type="button" 
							class="inline-flex items-center p-2 w-10 h-10 justify-center text-sm text-gray-300 rounded-lg md:hidden focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" 
							aria-controls="navbar-cta" aria-expanded="false">
				<span class="sr-only">Open main menu</span>
				<svg class="w-5 h-5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 17 14">
					<path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 1h15M1 7h15M1 13h15"/>
				</svg>
			</button>
		</div>
		<div class="items-center justify-between hidden w-full md:flex md:w-auto md:order-1" id="navbar-cta">
			<ul class="flex flex-col font-medium p-4 md:p-0 mt-4 border border-gray-100 rounded-lg md:space-x-8 rtl:space-x-reverse md:flex-row md:mt-0 md:border-0 dark:bg-gray-800 md:dark:bg-gray-900 dark:border-gray-700">
				<li class="content-center">
					<a href={redirectRef[lang].home} class="block py-2 px-3 md:p-0 text-white bg-blue-700 rounded md:bg-transparent md:text-blue-700 md:dark:text-blue-500" aria-current="page">
						{t("nav.menu.home")}
					</a>
				</li>
				<li class="content-center">
					<a href={redirectRef[lang].features} class="block py-2 px-3 md:p-0 text-white rounded hover:bg-gray-500 md:hover:bg-transparent md:hover:text-blue-700 md:dark:hover:text-blue-500 dark:text-white dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent dark:border-gray-700">
						{t("nav.menu.features")}
					</a>
				</li>
				<li class="content-center">
					<a href={redirectRef[lang].about} class="block py-2 px-3 md:p-0 text-white rounded hover:bg-gray-500 md:hover:bg-transparent md:hover:text-blue-700 md:dark:hover:text-blue-500 dark:text-white dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent dark:border-gray-700">
						{t("nav.menu.about")}
					</a>
				</li>
				<li class="content-center">
					<a href={redirectRef[lang].download} class="block py-2 px-3 md:p-0 text-white rounded hover:bg-gray-500 md:hover:bg-transparent md:hover:text-blue-700 md:dark:hover:text-blue-500 dark:text-white dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent dark:border-gray-700">
						{t("nav.menu.download")}
					</a>
				</li>
				<li>
					<div class="flex md:hidden flex-row content-start gap-3">
						{ lang !== 'en'
							? <div class="max-w-screen-xl flex flex-wrap items-center justify-between p-0">
								<a href={getRelativeLocaleUrl('en', '/')}>
									<div class="flex items-center md:order-2 space-x-1 md:space-x-0 rtl:space-x-reverse">
										<button type="button" data-dropdown-toggle="language-dropdown-menu" class="inline-flex items-center font-medium justify-center px-4 py-2 text-sm text-gray-900 dark:text-white rounded-lg cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 dark:hover:text-white">
											<svg class="w-6 h-6 rounded-full me-0" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 3900 3900"><path fill="#b22234" d="M0 0h7410v3900H0z"/><path d="M0 450h7410m0 600H0m0 600h7410m0 600H0m0 600h7410m0 600H0" stroke="#fff" stroke-width="300"/><path fill="#3c3b6e" d="M0 0h2964v2100H0z"/><g fill="#fff"><g id="d"><g id="c"><g id="e"><g id="b"><path id="a" d="M247 90l70.534 217.082-184.66-134.164h228.253L176.466 307.082z"/><use xlink:href="#a" y="420"/><use xlink:href="#a" y="840"/><use xlink:href="#a" y="1260"/></g><use xlink:href="#a" y="1680"/></g><use xlink:href="#b" x="247" y="210"/></g><use xlink:href="#c" x="494"/></g><use xlink:href="#d" x="988"/><use xlink:href="#c" x="1976"/><use xlink:href="#e" x="2470"/></g></svg>
											<!--English-->
										</button>
									</div>
								</a>
							</div>
							: null
						}
						{ lang !== 'es'
							? <div class="max-w-screen-xl flex flex-wrap items-center justify-between p-0">
								<a href={getRelativeLocaleUrl('es', '/')}>
									<div class="flex items-center md:order-2 space-x-1 md:space-x-0 rtl:space-x-reverse">
										<button type="button" data-dropdown-toggle="language-dropdown-menu" class="inline-flex items-center font-medium justify-center px-4 py-2 text-sm text-gray-900 dark:text-white rounded-lg cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 dark:hover:text-white">
											<svg class="w-6 h-6 rounded-full">
												<image xlink:href="https://flagicons.lipis.dev/flags/1x1/es.svg" class="w-6 h-6"/>
											</svg>
											<!--EspaÃ±a-->
										</button>
									</div>
								</a>
							</div>
							: null
						}
						{ lang !== 'it'
							? <div class="max-w-screen-xl flex flex-wrap items-center justify-between p-0">
								<a href={getRelativeLocaleUrl('it', '/')}>
									<div class="flex items-center md:order-2 space-x-1 md:space-x-0 rtl:space-x-reverse">
										<button type="button" data-dropdown-toggle="language-dropdown-menu" class="inline-flex items-center font-medium justify-center px-4 py-2 text-sm text-gray-900 dark:text-white rounded-lg cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 dark:hover:text-white">
											<svg class="w-6 h-6 rounded-full">
												<image xlink:href="https://flagicons.lipis.dev/flags/1x1/it.svg" class="w-6 h-6"/>
											</svg>
											<!--Italia-->
										</button>
									</div>
								</a>
							</div>
							: null
						}
						{ lang !== 'ca'
							? <div class="max-w-screen-xl flex flex-wrap items-center justify-between p-0">
								<a href={getRelativeLocaleUrl('ca', '/')}>
									<div class="flex items-center md:order-2 space-x-1 md:space-x-0 rtl:space-x-reverse">
										<button type="button" data-dropdown-toggle="language-dropdown-menu" class="inline-flex items-center font-medium justify-center px-4 py-2 text-sm text-gray-900 dark:text-white rounded-lg cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 dark:hover:text-white">
											<svg class="w-6 h-6 rounded-full">
												<image xlink:href="https://flagicons.lipis.dev/flags/1x1/es-ct.svg" class="w-6 h-6"/>
											</svg>
											<!--Catalan-->
										</button>
									</div>
								</a>
							</div>
							: null
						}
					</div>
					
					<div class="hidden md:flex max-w-screen-xl flex-wrap items-center justify-between mx-auto p-0">
						<div class="flex items-center md:order-2 space-x-1 md:space-x-0 rtl:space-x-reverse">
							<button type="button" data-dropdown-toggle="language-dropdown-menu" class="inline-flex items-center font-medium justify-center px-4 py-2 text-sm text-gray-900 dark:text-white rounded-lg cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 dark:hover:text-white">
								<svg class="w-6 h-6 rounded-full">
									<image xlink:href={"https://flagicons.lipis.dev/flags/1x1/"+flag[lang]+".svg"}  class="w-6 h-6"/>
								</svg>
							</button>
							<!-- Dropdown -->
							<div class="z-50 hidden my-4 text-base list-none bg-white divide-y divide-gray-100 rounded-lg shadow dark:bg-gray-700" id="language-dropdown-menu">
								<ul class="py-2 font-medium" role="none">
									{ lang !== 'en' 
										? <li>
											<a href={getRelativeLocaleUrl('en', '/')} class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-600 dark:hover:text-white" role="menuitem">
												<div class="inline-flex items-center gap-3">
													<svg class="w-6 h-6 rounded-full">
														<image xlink:href='https://flagicons.lipis.dev/flags/1x1/us.svg' class="w-6 h-6"/>
													</svg>
													{t("nav.menu.english")}
												</div>
											</a>
										</li>
										: null
									}
									{ lang !== 'es'
										? <li>
											<a href={getRelativeLocaleUrl('es', '/')} class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-600 dark:hover:text-white" role="menuitem">
												<div class="inline-flex items-center gap-3">
													<svg class="w-6 h-6 rounded-full">
														<image xlink:href="https://flagicons.lipis.dev/flags/1x1/es.svg" class="w-6 h-6"/>
													</svg>
													{t("nav.menu.spanish")}
												</div>
											</a>
										</li>
										: null
									}
									{ lang !== 'it'
										? <li>
											<a href={getRelativeLocaleUrl('it', '/')} class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-600 dark:hover:text-white" role="menuitem">
												<div class="inline-flex items-center gap-3">
													<svg class="w-6 h-6 rounded-full">
														<image xlink:href="https://flagicons.lipis.dev/flags/1x1/it.svg" class="w-6 h-6"/>
													</svg>
													{t("nav.menu.italian")}
												</div>
											</a>
										</li>
										: null
									}
									{ lang !== 'ca'
										? <li>
											<a href={getRelativeLocaleUrl('ca', '/')} class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-600 dark:hover:text-white" role="menuitem">
												<div class="inline-flex items-center gap-3">
													<svg class="w-6 h-6 rounded-full">
														<image xlink:href="https://flagicons.lipis.dev/flags/1x1/es-ct.svg" class="w-6 h-6"/>
													</svg>
													{t("nav.menu.catalan")}
												</div>
											</a>
										</li>
										: null
									}
								</ul>
							</div>
						</div>
					</div>
				</li>
			</ul>
		</div>
	</div>
</nav>

<style>
	.nav-container {
		background: #13151a;
	}
	
	.nav-container-logo {
		width: 40px;
		height: 40px;
		background-size: 40px;
		background-image: url('/public/img/logo/fortnite-llama-480.png');
	}
</style>
